base_backtest_config: configs/backtest_example.yaml

walk_forward:
  fold_count: 20
  train_pct: 0.70
  test_pct: 0.30
  step: test
  start_ts: null
  end_ts: null
  score:
    target_min_trades: 4
    target_max_dd: 0.05
    dd_penalty_weight: 1.0
    trades_penalty_weight: 0.02
    neg_equity_penalty_weight: 1.0

optuna:
  study_name: walk_forward_opt
  direction: maximize
  n_trials: 5
  sampler: tpe
  seed: 42

search_space:
  indicators:
    macd:
      fast:
        suggest: int
        low: 6
        high: 12
        step: 3
      slow:
        suggest: int
        low: 18
        high: 60
        step: 6
      signal:
        suggest: int
        low: 3
        high: 15
        step: 3
    cci:
      fast:
        suggest: int
        low: 10
        high: 60
        step: 10
      medium:
        suggest: int
        low: 60
        high: 240
        step: 20
      slow:
        suggest: int
        low: 200
        high: 600
        step: 50
    vwma:
      fast:
        suggest: int
        low: 3
        high: 12
        step: 3
      medium:
        suggest: int
        low: 6
        high: 30
        step: 6
    vortex:
      period:
        suggest: int
        low: 30
        high: 300
        step: 30
    dmi:
      period:
        suggest: int
        low: 30
        high: 300
        step: 30
      adx_smoothing:
        suggest: int
        low: 5
        high: 5
        step: 1
    atr:
      len:
        suggest: int
        low: 5
        high: 5
        step: 1
  exit_policy:
    allow_exit_signal:
      suggest: categorical
      choices: [true, false]
  sl:
    mode:
      suggest: categorical
      choices: [trailing_pct]
    trail_pct:
      suggest: float
      low: 0.01
      high: 0.1
      step: 0.005
  tp:
    mode:
      suggest: categorical
      choices: [none, fixed_pct]
    tp_pct:
      suggest: float
      low: 0.01
      high: 0.05
      step: 0.005
  trend_filter:
    enabled:
      suggest: categorical
      choices: [true, false]
    mode:
      suggest: categorical
      choices: [none, dmi, vortex, both]
  signals:
    entry:
      params:
        confluence_type:
          suggest: categorical
          choices: [instant, tranche_last]
        min_confirmed:
          suggest: int
          low: 4
          high: 8
        series_flags:
          close:
            suggest: categorical
            choices: [true]
          macd_line:
            suggest: categorical
            choices: [true, false]
          macd_hist:
            suggest: categorical
            choices: [true, false]
          cci_fast:
            suggest: categorical
            choices: [true, false]
          cci_medium:
            suggest: categorical
            choices: [true, false]
          cci_slow:
            suggest: categorical
            choices: [true, false]
          vwma_fast:
            suggest: categorical
            choices: [true, false]
          vwma_medium:
            suggest: categorical
            choices: [true, false]
        cci_thresholds:
          fast:
            suggest: float
            low: 0
            high: 200
            step: 10
          medium:
            suggest: float
            low: 0
            high: 200
            step: 10
          slow:
            suggest: float
            low: 0
            high: 200
            step: 10
    exit:
      params:
        confluence_type:
          suggest: categorical
          choices: [instant, tranche_last]
        min_confirmed:
          suggest: int
          low: 2
          high: 8
        series_flags:
          close:
            suggest: categorical
            choices: [true]
          macd_line:
            suggest: categorical
            choices: [true, false]
          macd_hist:
            suggest: categorical
            choices: [true, false]
          cci_fast:
            suggest: categorical
            choices: [true, false]
          cci_medium:
            suggest: categorical
            choices: [true, false]
          cci_slow:
            suggest: categorical
            choices: [true, false]
          vwma_fast:
            suggest: categorical
            choices: [true, false]
          vwma_medium:
            suggest: categorical
            choices: [true, false]
        cci_thresholds:
          fast:
            suggest: float
            low: 0
            high: 200
            step: 10
          medium:
            suggest: float
            low: 0
            high: 200
            step: 10
          slow:
            suggest: float
            low: 0
            high: 200
            step: 10

output:
  out_dir: data/processed/backtests/optuna_walk_forward
  save_best_config: true
  save_trials_csv: true
