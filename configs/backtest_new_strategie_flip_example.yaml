bybit: # Source de données (Bybit v5). Champs utilisés par scripts/43_backtest_new_strategie_flip_yaml.py
  symbol: LINKUSDT # Symbole Bybit (ex: BTCUSDT, ETHUSDT, LINKUSDT)
  category: linear # Catégorie Bybit: linear (perp USDT) | inverse | spot (selon disponibilité)
  base_url: https://api.bybit.com # Endpoint Bybit (prod: https://api.bybit.com)
  interval: 6h # TF des klines. Valeurs typiques Bybit: 1m,3m,5m,15m,30m,1h,2h,4h,6h,12h
  limit: 1000 # Nb max de bougies conservées après fetch (on tronque aux N dernières)
  start: 2024-01-01 # Début période fetch (YYYY-MM-DD). Doit être <= end
  end: 2024-12-31 # Fin période fetch (YYYY-MM-DD). Doit être >= start

window: # Fenêtre d'analyse (on calcule pivots/signaux/backtest uniquement sur cette portion finale)
  window_days: 90 # Nb de jours approx. converti en nb bougies selon interval (ex: 90j en 6h ~ 360 bougies)

indicators: # Paramètres des indicateurs calculés dans libs/new_strategie/indicators.py
  macd: {fast: 12, slow: 26, signal: 9} # MACD TV: fast/slow/signal (entiers). Ex: 12/26/9
  dmi: {period: 14, adx_smoothing: 6} # DMI/ADX TV: période DI/DX + lissage ADX (entiers). Ex: 14/6
  stoch: {k: 24, k_smooth: 2, d: 5} # Stoch 3 params: %K period, lissage %K (SMA), %D period (SMA)
  cci: {period: 28} # CCI période (entier). Ex: 20 ou 21

pivots: # Paramètres pivots (libs/new_strategie/pivots.py)
  zone_pct: 0.01 # Rayon zone pivot +/- (ex: 0.01 = +/-1%). Valeurs typiques: 0.005..0.02
  merge_pct: 0.01 # Seuil de fusion de niveaux proches (delta% entre pivots). Valeurs typiques: 0.005..0.02
  max_pivots: 10 # Nb max de pivots gardés après ranking (entier). Spec: 10

signals: # Paramètres signaux (libs/new_strategie/signals.py)
  condition_window_bars: 30 # Mémoire asynchrone: toutes les conditions d'un signal doivent arriver dans les N dernières bougies (ordre libre)
  enable_premature: true # true/false: active les signaux "premature" (rejet au pivot). false => uniquement les signaux "validated" (open space)

backtest: # Paramètres backtest (flip: entrée sur signal, flip sur signal suivant) + SL fixe
  sl_pct: 0.05 # Stop loss fixe (ex: 0.05 = 5%). LONG: entry*(1-sl_pct) ; SHORT: entry*(1+sl_pct)

output: # Sorties du script YAML (CSV/PNG) dans out_dir
  out_dir: data/processed/backtests/new_strategie_flip_example # Dossier de sortie (créé si absent)
  png: true # true/false: génère equity.png (matplotlib) si dispo
  save_csv: true # true/false: exporte ohlcv_indicators.csv, pivots.csv, signals.csv, trades.csv, equity.csv
